# ===================================

# TARDISTUDY - Configuração de Cache

# ===================================

# Habilita rewrite engine

<IfModule mod_rewrite.c>
  RewriteEngine On
</IfModule>

# ===================================

# CONTROLE DE CACHE

# ===================================

<IfModule mod_headers.c>
  # HTML - Sem cache (sempre buscar nova versão)
  <FilesMatch "\.(html|htm)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>

# CSS e JavaScript - Cache curto (1 hora)

<FilesMatch "\.(css|js)$">
Header set Cache-Control "public, max-age=3600, must-revalidate"
</FilesMatch>

# Imagens - Cache longo (1 semana)

<FilesMatch "\.(jpg|jpeg|png|gif|ico|svg|webp)$">
Header set Cache-Control "public, max-age=604800, immutable"
</FilesMatch>

# Fontes - Cache longo (1 mês)

<FilesMatch "\.(woff|woff2|ttf|otf|eot)$">
Header set Cache-Control "public, max-age=2592000, immutable"
</FilesMatch>

# JSON (manifest, etc) - Sem cache

<FilesMatch "\.(json)$">
Header set Cache-Control "no-cache, must-revalidate"
</FilesMatch>
</IfModule>

# ===================================

# COMPRESSÃO GZIP

# ===================================

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE text/javascript
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/json
  AddOutputFilterByType DEFLATE image/svg+xml
</IfModule>

# ===================================

# SEGURANÇA

# ===================================

<IfModule mod_headers.c>
  # Previne clickjacking
  Header always set X-Frame-Options "SAMEORIGIN"
  
  # Previne MIME type sniffing
  Header always set X-Content-Type-Options "nosniff"
  
  # Habilita proteção XSS
  Header always set X-XSS-Protection "1; mode=block"
  
  # Referrer Policy
  Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# ===================================

# TIPOS MIME

# ===================================

<IfModule mod_mime.c>
  AddType application/javascript js
  AddType text/css css
  AddType image/svg+xml svg
  AddType application/json json
  AddType application/manifest+json webmanifest
</IfModule>
